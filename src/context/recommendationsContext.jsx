// FinancialRecommendationsContext.js
import { createContext, useContext, useState, useEffect } from 'react';

const FinancialRecommendationsContext = createContext();

export const FinancialRecommendationsProvider = ({ children }) => {
  const [recommendations, setRecommendations] = useState("<div class=\"dark:text-white\">\n  <h2 class=\"text-2xl font-semibold mb-4\">Financial Recommendations</h2>\n\n  <h3 class=\"text-lg font-semibold mb-2\">Financial Data</h3>\n\n  <h4 class=\"text-lg font-semibold mb-2\">Income</h4>\n  <table class=\"w-full mb-4\">\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <th class=\"p-2\">Source</th>\n      <th class=\"p-2\">Amount</th>\n      <th class=\"p-2\">Frequency</th>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Salary</td>\n        <td class=\"p-2\">KES 100,000</td>\n        <td class=\"p-2\">Monthly</td>\n      </tr>\n  </table>\n\n  <h4 class=\"text-lg font-semibold mb-2\">Expenses</h4>\n  <table class=\"w-full mb-4\">\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <th class=\"p-2\">Category</th>\n      <th class=\"p-2\">Amount</th>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Rent</td>\n        <td class=\"p-2\">KES 20,000</td>\n      </tr>\n      <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Utilities</td>\n        <td class=\"p-2\">KES 5,000</td>\n      </tr>\n      <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Transportation</td>\n        <td class=\"p-2\">KES 10,000</td>\n      </tr>\n      <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Food</td>\n        <td class=\"p-2\">KES 15,000</td>\n      </tr>\n      <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Entertainment</td>\n        <td class=\"p-2\">KES 5,000</td>\n      </tr>\n  </table>\n\n  <h4 class=\"text-lg font-semibold mb-2\">Savings</h4>\n  <table class=\"w-full mb-4\">\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <th class=\"p-2\">Type</th>\n      <th class=\"p-2\">Amount</th>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Emergency Fund</td>\n        <td class=\"p-2\">KES 10,000</td>\n      </tr>\n      <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Retirement Fund</td>\n        <td class=\"p-2\">KES 5,000</td>\n      </tr>\n  </table>\n\n  <h4 class=\"text-lg font-semibold mb-2\">Goals</h4>\n  <table class=\"w-full mb-4\">\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <th class=\"p-2\">Description</th>\n      <th class=\"p-2\">Target</th>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Buy a car</td>\n        <td class=\"p-2\">KES 500,000</td>\n      </tr>\n      <tr class=\"border border-slate-500 dark:border-slate-200 \">\n        <td class=\"p-2\">Save for a vacation</td>\n        <td class=\"p-2\">KES 200,000</td>\n      </tr>\n  </table>\n  \n  <h3 class=\"text-lg font-semibold mb-2\">Budget</h3>\n  <p class=\"mb-4\">\n    To create a budget tailored to your financial situation, we will consider your income, expenses, savings, and goals. Here's a suggested budgeting plan to help you manage your finances effectively:\n  </p>\n  <table class=\"w-full mb-4\">\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <th class=\"p-2\">Category</th>\n      <th class=\"p-2\">Percentage</th>\n      <th class=\"p-2\">Amount (KES)</th>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <td class=\"p-2\">Housing</td>\n      <td class=\"p-2\">30%</td>\n      <td class=\"p-2\">KES 30,000</td>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <td class=\"p-2\">Utilities</td>\n      <td class=\"p-2\">10%</td>\n      <td class=\"p-2\">KES 10,000</td>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <td class=\"p-2\">Transportation</td>\n      <td class=\"p-2\">10%</td>\n      <td class=\"p-2\">KES 10,000</td>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <td class=\"p-2\">Food</td>\n      <td class=\"p-2\">15%</td>\n      <td class=\"p-2\">KES 15,000</td>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <td class=\"p-2\">Entertainment</td>\n      <td class=\"p-2\">5%</td>\n      <td class=\"p-2\">KES 5,000</td>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <td class=\"p-2\">Savings</td>\n      <td class=\"p-2\">20%</td>\n      <td class=\"p-2\">KES 20,000</td>\n    </tr>\n    <tr class=\"border border-slate-500 dark:border-slate-200 \">\n      <td class=\"p-2\">Debt Repayment</td>\n      <td class=\"p-2\">10%</td>\n      <td class=\"p-2\">KES 10,000</td>\n    </tr>\n  </table>\n\n  <h3 class=\"text-lg font-semibold mb-2\">Savings</h3>\n  <p class=\"mb-4\">\n    To enhance your savings strategy, consider the following recommendations:\n  </p>\n  <ul class=\"list-disc pl-6 mb-4\">\n    <li>Set specific savings goals: Define how much you want to save for each goal, such as buying a car or saving for a vacation.</li>\n    <li>Automate your savings: Set up automatic transfers from your salary account to your savings account.</li>\n    <li>Track your expenses: Keep an eye on your spending habits and identify areas where you can cut back.</li>\n    <li>Reduce unnecessary expenses: Minimize impulse purchases and focus on essential items.</li>\n    <li>Take advantage of savings accounts: Look for savings accounts with competitive interest rates to grow your savings faster.</li>\n  </ul>\n\n  <h3 class=\"text-lg font-semibold mb-2\">Investments</h3>\n  <p class=\"mb-4\">\n    Based on your financial goals, investing can be an effective way to grow your wealth. Consider the following investment strategies:\n  </p>\n  <ul class=\"list-disc pl-6 mb-4\">\n    <li>Diversify your portfolio: Spread your investments across different asset classes, such as stocks, bonds, and real estate.</li>\n    <li>Start with low-risk investments: Begin with safer investment options like fixed deposits or government bonds before considering higher-risk alternatives.</li>\n    <li>Consider mutual funds or ETFs: These funds pool money from multiple investors to invest in diversified portfolios.</li>\n    <li>Consult with a financial advisor: Seek professional advice to identify suitable investment opportunities and assess the risk associated with each option.</li>\n    <li>Monitor your investments: Regularly review your investment performance and make adjustments as needed.</li>\n  </ul>\n\n  <h3 class=\"text-lg font-semibold mb-2\">Debt Management</h3>\n  <p class=\"mb-4\">\n    To manage your debt effectively, consider the following strategies:\n  </p>\n  <ul class=\"list-disc pl-6 mb-4\">\n    <li>Create a repayment plan: Make a list of your debts and prioritize them based on interest rates. Allocate a portion of your budget towards debt repayment.</li>\n    <li>Pay more than the minimum: Whenever possible, aim to pay more than the minimum monthly payment to reduce interest charges and pay off the debt faster.</li>\n    <li>Negotiate lower interest rates: Contact your creditors and inquire about the possibility of lowering your interest rates.</li>\n    <li>Avoid new debt: Minimize new credit card charges and loans while you focus on paying off existing debts.</li>\n    <li>Consider debt consolidation: Explore the option of consolidating high-interest debts into a single loan with a lower interest rate.</li>\n  </ul>\n\n  <h3 class=\"text-lg font-semibold mb-2\">Financial Goals</h3>\n  <p class=\"mb-4\">\n    To achieve your financial goals, follow this plan:\n  </p>\n  <ul class=\"list-disc pl-6 mb-4\">\n    <li>Set SMART goals: Make your goals specific, measurable, attainable, relevant, and time-bound.</li>\n    <li>Break down your goals into milestones: Divide your goals into smaller, achievable targets to track your progress.</li>\n    <li>Create a timeline: Set deadlines for each milestone to remain focused and motivated.</li>\n    <li>Adjust your budget: Allocate a portion of your income towards savings and investments to accelerate your progress towards your goals.</li>\n    <li>Review and adjust regularly: Monitor your progress, reassess your goals, and adjust your plan as necessary.</li>\n  </ul>\n\n</div>");
  console.log('recs'. recommendations)

  useEffect(() => {
    // Load recommendations from local storage when the component mounts
    const storedRecommendations = localStorage.getItem('financialRecommendations') || "";
    setRecommendations(storedRecommendations);
  }, []);

  // Save recommendations to local storage whenever recommendations change
  useEffect(() => {
    localStorage.setItem('financialRecommendations', recommendations);
  }, [recommendations]);

  const updateRecommendations = (newRecommendations) => {
    setRecommendations(newRecommendations);
  };

  const clearRecommendations = () => {
    setRecommendations("");
  };

  return (
    <FinancialRecommendationsContext.Provider value={{ recommendations, updateRecommendations, clearRecommendations }}>
      {children}
    </FinancialRecommendationsContext.Provider>
  );
};

export const useFinancialRecommendations = () => {
  return useContext(FinancialRecommendationsContext);
};
